version: '3.8'

services:
  accbox:
    build: .
    container_name: accbox-v5
    ports:
      - "${PORT:-9111}:80"
    volumes:
      # ğŸ—ƒï¸ æ ¸å¿ƒæ•°æ®
      - ./data:/app/data
      
      # ğŸ“¦ å¤‡ä»½æ•°æ® - å¯åœ¨ .env ä¸­è®¾ç½® BACKUP_HOST_PATH ä¿®æ”¹ä½ç½®
      # é»˜è®¤: ./backupsï¼ˆé¡¹ç›®ç›®å½•ä¸‹ï¼‰
      # ç¤ºä¾‹: BACKUP_HOST_PATH=/mnt/backup_disk/accbox
      - ${BACKUP_HOST_PATH:-./backups}:/app/backups
    restart: unless-stopped
    environment:
      - TZ=Asia/Shanghai
      - DATA_DIR=/app/data
      - BACKUP_PATH=/app/backups
      # âš ï¸ å®‰å…¨é…ç½®ï¼šè¯·åœ¨ .env æ–‡ä»¶ä¸­è®¾ç½®æ‚¨çš„å¯†é’¥ï¼
      # æ­¥éª¤ï¼šcp .env.example .env ç„¶åç¼–è¾‘ .env å¡«å…¥å¯†é’¥
      # ç”Ÿæˆå¯†é’¥: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
      # æ³¨æ„: ä½¿ç”¨é»˜è®¤å¯†é’¥æ—¶ç³»ç»Ÿä¼šæ˜¾ç¤ºå®‰å…¨è­¦å‘Šï¼Œè¯·å‹¿ç›´æ¥ä¿®æ”¹æ­¤æ–‡ä»¶
      - APP_MASTER_KEY=${APP_MASTER_KEY:-MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA=}
      # JWT å¯†é’¥ (å¯é€‰ï¼Œä¸è®¾ç½®åˆ™è‡ªåŠ¨ä» APP_MASTER_KEY æ´¾ç”Ÿ)
      - JWT_SECRET_KEY=${JWT_SECRET_KEY:-}
